{"version":3,"file":"intl-messageformat.min.js","sources":["../lib/compiler.js","../lib/core.js","../lib/index.js","../lib/en.js"],"sourcesContent":["/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar Compiler = /** @class */ (function () {\n    function Compiler(locales, formats) {\n        this.locales = [];\n        this.formats = {\n            number: {},\n            date: {},\n            time: {}\n        };\n        this.pluralNumberFormat = null;\n        this.currentPlural = null;\n        this.pluralStack = [];\n        this.locales = locales;\n        this.formats = formats;\n    }\n    Compiler.prototype.compile = function (ast) {\n        this.pluralStack = [];\n        this.currentPlural = null;\n        this.pluralNumberFormat = null;\n        return this.compileMessage(ast);\n    };\n    Compiler.prototype.compileMessage = function (ast) {\n        var _this = this;\n        if (!(ast && ast.type === \"messageFormatPattern\")) {\n            throw new Error('Message AST is not of type: \"messageFormatPattern\"');\n        }\n        var elements = ast.elements;\n        var pattern = elements\n            .filter(function (el) {\n            return el.type === \"messageTextElement\" || el.type === \"argumentElement\";\n        })\n            .map(function (el) {\n            return el.type === \"messageTextElement\"\n                ? _this.compileMessageText(el)\n                : _this.compileArgument(el);\n        });\n        if (pattern.length !== elements.length) {\n            throw new Error(\"Message element does not have a valid type\");\n        }\n        return pattern;\n    };\n    Compiler.prototype.compileMessageText = function (element) {\n        // When this `element` is part of plural sub-pattern and its value contains\n        // an unescaped '#', use a `PluralOffsetString` helper to properly output\n        // the number with the correct offset in the string.\n        if (this.currentPlural && /(^|[^\\\\])#/g.test(element.value)) {\n            // Create a cache a NumberFormat instance that can be reused for any\n            // PluralOffsetString instance in this message.\n            if (!this.pluralNumberFormat) {\n                this.pluralNumberFormat = new Intl.NumberFormat(this.locales);\n            }\n            return new PluralOffsetString(this.currentPlural.id, this.currentPlural.format.offset, this.pluralNumberFormat, element.value);\n        }\n        // Unescape the escaped '#'s in the message text.\n        return element.value.replace(/\\\\#/g, \"#\");\n    };\n    Compiler.prototype.compileArgument = function (element) {\n        var format = element.format, id = element.id;\n        if (!format) {\n            return new StringFormat(id);\n        }\n        var _a = this, formats = _a.formats, locales = _a.locales;\n        switch (format.type) {\n            case \"numberFormat\":\n                return {\n                    id: id,\n                    format: new Intl.NumberFormat(locales, formats.number[format.style])\n                        .format\n                };\n            case \"dateFormat\":\n                return {\n                    id: id,\n                    format: new Intl.DateTimeFormat(locales, formats.date[format.style])\n                        .format\n                };\n            case \"timeFormat\":\n                return {\n                    id: id,\n                    format: new Intl.DateTimeFormat(locales, formats.time[format.style])\n                        .format\n                };\n            case \"pluralFormat\":\n                return new PluralFormat(id, format.ordinal, format.offset, this.compileOptions(element), locales);\n            case \"selectFormat\":\n                return new SelectFormat(id, this.compileOptions(element));\n            default:\n                throw new Error(\"Message element does not have a valid format type\");\n        }\n    };\n    Compiler.prototype.compileOptions = function (element) {\n        var format = element.format;\n        var options = format.options;\n        var optionsHash = {};\n        // Save the current plural element, if any, then set it to a new value when\n        // compiling the options sub-patterns. This conforms the spec's algorithm\n        // for handling `\"#\"` syntax in message text.\n        this.pluralStack.push(this.currentPlural);\n        this.currentPlural = format.type === \"pluralFormat\" ? element : null;\n        var i, len, option;\n        for (i = 0, len = options.length; i < len; i += 1) {\n            option = options[i];\n            // Compile the sub-pattern and save it under the options's selector.\n            optionsHash[option.selector] = this.compileMessage(option.value);\n        }\n        // Pop the plural stack to put back the original current plural value.\n        this.currentPlural = this.pluralStack.pop();\n        return optionsHash;\n    };\n    return Compiler;\n}());\nexport default Compiler;\n// -- Compiler Helper Classes --------------------------------------------------\nvar Formatter = /** @class */ (function () {\n    function Formatter(id) {\n        this.id = id;\n    }\n    return Formatter;\n}());\nvar StringFormat = /** @class */ (function (_super) {\n    __extends(StringFormat, _super);\n    function StringFormat() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    StringFormat.prototype.format = function (value) {\n        if (!value && typeof value !== \"number\") {\n            return \"\";\n        }\n        return typeof value === \"string\" ? value : String(value);\n    };\n    return StringFormat;\n}(Formatter));\nexport { StringFormat };\nvar PluralFormat = /** @class */ (function () {\n    function PluralFormat(id, useOrdinal, offset, options, locales) {\n        this.id = id;\n        this.offset = offset;\n        this.options = options;\n        this.pluralRules = new Intl.PluralRules(locales, {\n            type: useOrdinal ? \"ordinal\" : \"cardinal\"\n        });\n    }\n    PluralFormat.prototype.getOption = function (value) {\n        var options = this.options;\n        var option = options[\"=\" + value] ||\n            options[this.pluralRules.select(value - this.offset)];\n        return option || options.other;\n    };\n    return PluralFormat;\n}());\nexport { PluralFormat };\nvar PluralOffsetString = /** @class */ (function (_super) {\n    __extends(PluralOffsetString, _super);\n    function PluralOffsetString(id, offset, numberFormat, string) {\n        var _this = _super.call(this, id) || this;\n        _this.offset = offset;\n        _this.numberFormat = numberFormat;\n        _this.string = string;\n        return _this;\n    }\n    PluralOffsetString.prototype.format = function (value) {\n        var number = this.numberFormat.format(value - this.offset);\n        return this.string\n            .replace(/(^|[^\\\\])#/g, \"$1\" + number)\n            .replace(/\\\\#/g, \"#\");\n    };\n    return PluralOffsetString;\n}(Formatter));\nexport { PluralOffsetString };\nvar SelectFormat = /** @class */ (function () {\n    function SelectFormat(id, options) {\n        this.id = id;\n        this.options = options;\n    }\n    SelectFormat.prototype.getOption = function (value) {\n        var options = this.options;\n        return options[value] || options.other;\n    };\n    return SelectFormat;\n}());\nexport { SelectFormat };\nexport function isSelectOrPluralFormat(f) {\n    return !!f.options;\n}\n//# sourceMappingURL=compiler.js.map","/*\nCopyright (c) 2014, Yahoo! Inc. All rights reserved.\nCopyrights licensed under the New BSD License.\nSee the accompanying LICENSE file for terms.\n*/\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\n/* jslint esnext: true */\nimport Compiler, { isSelectOrPluralFormat } from \"./compiler\";\nimport parser from \"intl-messageformat-parser\";\n// -- MessageFormat --------------------------------------------------------\nvar MessageFormat = /** @class */ (function () {\n    function MessageFormat(message, locales, overrideFormats) {\n        var _this = this;\n        // \"Bind\" `format()` method to `this` so it can be passed by reference like\n        // the other `Intl` APIs.\n        this.format = function (values) {\n            try {\n                return _this._format(_this.pattern, values);\n            }\n            catch (e) {\n                if (e.variableId) {\n                    throw new Error(\"The intl string context variable '\" +\n                        e.variableId +\n                        \"'\" +\n                        \" was not provided to the string '\" +\n                        _this.message +\n                        \"'\");\n                }\n                else {\n                    throw e;\n                }\n            }\n        };\n        // Parse string messages into an AST.\n        var ast = typeof message === \"string\" ? MessageFormat.__parse(message) : message;\n        if (!(ast && ast.type === \"messageFormatPattern\")) {\n            throw new TypeError(\"A message must be provided as a String or AST.\");\n        }\n        // Creates a new object with the specified `formats` merged with the default\n        // formats.\n        var formats = mergeConfigs(MessageFormat.formats, overrideFormats);\n        // Defined first because it's used to build the format pattern.\n        this._locale = this._resolveLocale(locales || []);\n        // Compile the `ast` to a pattern that is highly optimized for repeated\n        // `format()` invocations. **Note:** This passes the `locales` set provided\n        // to the constructor instead of just the resolved locale.\n        this.pattern = this._compilePattern(ast, locales || [], formats);\n        this.message = message;\n    }\n    MessageFormat.__addLocaleData = function (data) {\n        if (!(data && data.locale)) {\n            throw new Error(\"Locale data provided to IntlMessageFormat is missing a \" +\n                \"`locale` property\");\n        }\n        MessageFormat.__localeData__[data.locale.toLowerCase()] = data;\n    };\n    MessageFormat.prototype.resolvedOptions = function () {\n        return { locale: this._locale };\n    };\n    MessageFormat.prototype._resolveLocale = function (locales) {\n        if (typeof locales === \"string\") {\n            locales = [locales];\n        }\n        // Create a copy of the array so we can push on the default locale.\n        locales = (locales || []).concat(MessageFormat.defaultLocale);\n        var localeData = MessageFormat.__localeData__;\n        var i, len, localeParts, data;\n        // Using the set of locales + the default locale, we look for the first one\n        // which that has been registered. When data does not exist for a locale, we\n        // traverse its ancestors to find something that's been registered within\n        // its hierarchy of locales. Since we lack the proper `parentLocale` data\n        // here, we must take a naive approach to traversal.\n        for (i = 0, len = locales.length; i < len; i += 1) {\n            localeParts = locales[i].toLowerCase().split(\"-\");\n            while (localeParts.length) {\n                data = localeData[localeParts.join(\"-\")];\n                if (data) {\n                    // Return the normalized locale string; e.g., we return \"en-US\",\n                    // instead of \"en-us\".\n                    return data.locale;\n                }\n                localeParts.pop();\n            }\n        }\n        var defaultLocale = locales.pop();\n        throw new Error(\"No locale data has been added to IntlMessageFormat for: \" +\n            locales.join(\", \") +\n            \", or the default locale: \" +\n            defaultLocale);\n    };\n    MessageFormat.prototype._compilePattern = function (ast, locales, formats) {\n        var compiler = new Compiler(locales, formats);\n        return compiler.compile(ast);\n    };\n    MessageFormat.prototype._format = function (pattern, values) {\n        var result = \"\", i, len, part, id, value;\n        for (i = 0, len = pattern.length; i < len; i += 1) {\n            part = pattern[i];\n            // Exist early for string parts.\n            if (typeof part === \"string\") {\n                result += part;\n                continue;\n            }\n            id = part.id;\n            // Enforce that all required values are provided by the caller.\n            if (!(values && id in values)) {\n                throw new FormatError(\"A value must be provided for: \" + id, id);\n            }\n            value = values[id];\n            // Recursively format plural and select parts' option — which can be a\n            // nested pattern structure. The choosing of the option to use is\n            // abstracted-by and delegated-to the part helper object.\n            if (isSelectOrPluralFormat(part)) {\n                result += this._format(part.getOption(value), values);\n            }\n            else {\n                result += part.format(value);\n            }\n        }\n        return result;\n    };\n    MessageFormat.defaultLocale = 'en';\n    MessageFormat.__localeData__ = {};\n    // Default format options used as the prototype of the `formats` provided to the\n    // constructor. These are used when constructing the internal Intl.NumberFormat\n    // and Intl.DateTimeFormat instances.\n    MessageFormat.formats = {\n        number: {\n            currency: {\n                style: \"currency\"\n            },\n            percent: {\n                style: \"percent\"\n            }\n        },\n        date: {\n            short: {\n                month: \"numeric\",\n                day: \"numeric\",\n                year: \"2-digit\"\n            },\n            medium: {\n                month: \"short\",\n                day: \"numeric\",\n                year: \"numeric\"\n            },\n            long: {\n                month: \"long\",\n                day: \"numeric\",\n                year: \"numeric\"\n            },\n            full: {\n                weekday: \"long\",\n                month: \"long\",\n                day: \"numeric\",\n                year: \"numeric\"\n            }\n        },\n        time: {\n            short: {\n                hour: \"numeric\",\n                minute: \"numeric\"\n            },\n            medium: {\n                hour: \"numeric\",\n                minute: \"numeric\",\n                second: \"numeric\"\n            },\n            long: {\n                hour: \"numeric\",\n                minute: \"numeric\",\n                second: \"numeric\",\n                timeZoneName: \"short\"\n            },\n            full: {\n                hour: \"numeric\",\n                minute: \"numeric\",\n                second: \"numeric\",\n                timeZoneName: \"short\"\n            }\n        }\n    };\n    MessageFormat.__parse = parser.parse;\n    return MessageFormat;\n}());\nexport default MessageFormat;\nfunction mergeConfig(c1, c2) {\n    if (!c2) {\n        return c1;\n    }\n    return __assign({}, (c1 || {}), (c2 || {}), Object.keys(c1).reduce(function (all, k) {\n        all[k] = __assign({}, c1[k], (c2[k] || {}));\n        return all;\n    }, {}));\n}\nfunction mergeConfigs(defaultConfig, configs) {\n    if (!configs) {\n        return defaultConfig;\n    }\n    return __assign({}, defaultConfig, { date: mergeConfig(defaultConfig.date, configs.date) });\n}\nvar FormatError = /** @class */ (function (_super) {\n    __extends(FormatError, _super);\n    function FormatError(msg, variableId) {\n        var _this = _super.call(this, msg) || this;\n        _this.variableId = variableId;\n        return _this;\n    }\n    return FormatError;\n}(Error));\n//# sourceMappingURL=core.js.map","/* jslint esnext: true */\nimport IntlMessageFormat from \"./core\";\nimport defaultLocale from \"./en\";\nIntlMessageFormat.__addLocaleData(defaultLocale);\nIntlMessageFormat.defaultLocale = \"en\";\nexport default IntlMessageFormat;\n//# sourceMappingURL=index.js.map","/* @generated */\nexport default { \"locale\": \"en\" };\n//# sourceMappingURL=en.js.map"],"names":["extendStatics","__extends","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","this","constructor","prototype","create","Compiler","compile","ast","pluralStack","currentPlural","pluralNumberFormat","compileMessage","_this","type","Error","elements","pattern","filter","el","map","compileMessageText","compileArgument","length","element","test","value","Intl","NumberFormat","locales","PluralOffsetString","id","format","offset","replace","StringFormat","formats","number","style","DateTimeFormat","date","time","PluralFormat","ordinal","compileOptions","SelectFormat","i","len","option","options","optionsHash","push","selector","pop","Formatter","_super","String","apply","arguments","getOption","pluralRules","select","other","useOrdinal","PluralRules","numberFormat","string","call","__assign","assign","t","s","n","MessageFormat","__addLocaleData","data","locale","__localeData__","toLowerCase","resolvedOptions","_locale","_resolveLocale","concat","defaultLocale","localeParts","localeData","split","join","_compilePattern","_format","values","part","result","FormatError","currency","percent","short","month","day","year","medium","long","full","weekday","hour","minute","second","timeZoneName","__parse","parser","parse","message","overrideFormats","e","variableId","TypeError","defaultConfig","configs","c1","c2","keys","reduce","all","k","mergeConfig","mergeConfigs","msg"],"mappings":"+TAKA,IACQA,EADJC,GACID,EAAgB,SAAUE,EAAGC,GAI7B,OAHAH,EAAgBI,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAErB,SAAUD,EAAGC,GAEhB,SAASO,IAAOC,KAAKC,YAAcV,EADnCF,EAAcE,EAAGC,GAEjBD,EAAEW,UAAkB,OAANV,EAAaC,OAAOU,OAAOX,IAAMO,EAAGG,UAAYV,EAAEU,UAAW,IAAIH,KAGnFK,GAcAA,EAASF,UAAUG,QAAU,SAAUC,GAInC,OAHAN,KAAKO,YAAc,GACnBP,KAAKQ,cAAgB,KACrBR,KAAKS,mBAAqB,KACnBT,KAAKU,eAAeJ,IAE/BF,EAASF,UAAUQ,eAAiB,SAAUJ,GAC1C,IAAIK,EAAQX,KACZ,IAAMM,GAAoB,yBAAbA,EAAIM,KACb,MAAM,IAAIC,MAAM,sDAEpB,IAAIC,EAAWR,EAAIQ,SACfC,EAAUD,EACTE,OAAO,SAAUC,GAClB,MAAmB,uBAAZA,EAAGL,MAA6C,oBAAZK,EAAGL,OAE7CM,IAAI,SAAUD,GACf,MAAmB,uBAAZA,EAAGL,KACJD,EAAMQ,mBAAmBF,GACzBN,EAAMS,gBAAgBH,KAEhC,GAAIF,EAAQM,SAAWP,EAASO,OAC5B,MAAM,IAAIR,MAAM,8CAEpB,OAAOE,GAEXX,EAASF,UAAUiB,mBAAqB,SAAUG,GAI9C,OAAItB,KAAKQ,eAAiB,cAAce,KAAKD,EAAQE,QAG5CxB,KAAKS,qBACNT,KAAKS,mBAAqB,IAAIgB,KAAKC,aAAa1B,KAAK2B,UAElD,IAAIC,EAAmB5B,KAAKQ,cAAcqB,GAAI7B,KAAKQ,cAAcsB,OAAOC,OAAQ/B,KAAKS,mBAAoBa,EAAQE,QAGrHF,EAAQE,MAAMQ,QAAQ,OAAQ,MAEzC5B,EAASF,UAAUkB,gBAAkB,SAAUE,GAC3C,IAAIQ,EAASR,EAAQQ,OAAQD,EAAKP,EAAQO,GAC1C,IAAKC,EACD,OAAO,IAAIG,EAAaJ,GAE5B,IAAeK,EAANlC,KAAmBkC,QAASP,EAA5B3B,KAAyC2B,QAClD,OAAQG,EAAOlB,MACX,IAAK,eACD,MAAO,CACHiB,GAAIA,EACJC,OAAQ,IAAIL,KAAKC,aAAaC,EAASO,EAAQC,OAAOL,EAAOM,QACxDN,QAEb,IAAK,aACD,MAAO,CACHD,GAAIA,EACJC,OAAQ,IAAIL,KAAKY,eAAeV,EAASO,EAAQI,KAAKR,EAAOM,QACxDN,QAEb,IAAK,aACD,MAAO,CACHD,GAAIA,EACJC,OAAQ,IAAIL,KAAKY,eAAeV,EAASO,EAAQK,KAAKT,EAAOM,QACxDN,QAEb,IAAK,eACD,OAAO,IAAIU,EAAaX,EAAIC,EAAOW,QAASX,EAAOC,OAAQ/B,KAAK0C,eAAepB,GAAUK,GAC7F,IAAK,eACD,OAAO,IAAIgB,EAAad,EAAI7B,KAAK0C,eAAepB,IACpD,QACI,MAAM,IAAIT,MAAM,uDAG5BT,EAASF,UAAUwC,eAAiB,SAAUpB,GAC1C,IAQIsB,EAAGC,EAAKC,EARRhB,EAASR,EAAQQ,OACjBiB,EAAUjB,EAAOiB,QACjBC,EAAc,GAOlB,IAHAhD,KAAKO,YAAY0C,KAAKjD,KAAKQ,eAC3BR,KAAKQ,cAAgC,iBAAhBsB,EAAOlB,KAA0BU,EAAU,KAE3DsB,EAAI,EAAGC,EAAME,EAAQ1B,OAAQuB,EAAIC,EAAKD,GAAK,EAG5CI,GAFAF,EAASC,EAAQH,IAEEM,UAAYlD,KAAKU,eAAeoC,EAAOtB,OAI9D,OADAxB,KAAKQ,cAAgBR,KAAKO,YAAY4C,MAC/BH,GAEJ5C,GA1GP,SAASA,EAASuB,EAASO,GACvBlC,KAAK2B,QAAU,GACf3B,KAAKkC,QAAU,CACXC,OAAQ,GACRG,KAAM,GACNC,KAAM,IAEVvC,KAAKS,mBAAqB,KAC1BT,KAAKQ,cAAgB,KACrBR,KAAKO,YAAc,GACnBP,KAAK2B,QAAUA,EACf3B,KAAKkC,QAAUA,EAoGnB,SADAkB,EACmBvB,GACf7B,KAAK6B,GAAKA,EAFlB,IAM4CwB,EAAxCpB,GACA3C,EAAU2C,EAD8BoB,EAY1CD,GAPEnB,EAAa/B,UAAU4B,OAAS,SAAUN,GACtC,OAAKA,GAA0B,iBAAVA,EAGG,iBAAVA,EAAqBA,EAAQ8B,OAAO9B,GAFvC,IAIRS,GATP,SAASA,IACL,OAAkB,OAAXoB,GAAmBA,EAAOE,MAAMvD,KAAMwD,YAAcxD,KAWnE,IAAIwC,GASAA,EAAatC,UAAUuD,UAAY,SAAUjC,GACzC,IAAIuB,EAAU/C,KAAK+C,QAGnB,OAFaA,EAAQ,IAAMvB,IACvBuB,EAAQ/C,KAAK0D,YAAYC,OAAOnC,EAAQxB,KAAK+B,UAChCgB,EAAQa,OAEtBpB,GAdP,SAASA,EAAaX,EAAIgC,EAAY9B,EAAQgB,EAASpB,GACnD3B,KAAK6B,GAAKA,EACV7B,KAAK+B,OAASA,EACd/B,KAAK+C,QAAUA,EACf/C,KAAK0D,YAAc,IAAIjC,KAAKqC,YAAYnC,EAAS,CAC7Cf,KAAMiD,EAAa,UAAY,aAY3C,IAAkDR,EAA9CzB,GACAtC,EAAUsC,EADoCyB,EAgBhDD,GAPExB,EAAmB1B,UAAU4B,OAAS,SAAUN,GAC5C,IAAIW,EAASnC,KAAK+D,aAAajC,OAAON,EAAQxB,KAAK+B,QACnD,OAAO/B,KAAKgE,OACPhC,QAAQ,cAAe,KAAOG,GAC9BH,QAAQ,OAAQ,MAElBJ,GAbP,SAASA,EAAmBC,EAAIE,EAAQgC,EAAcC,GAClD,IAAIrD,EAAQ0C,EAAOY,KAAKjE,KAAM6B,IAAO7B,KAIrC,OAHAW,EAAMoB,OAASA,EACfpB,EAAMoD,aAAeA,EACrBpD,EAAMqD,OAASA,EACRrD,EAWf,IAAIgC,GAKAA,EAAazC,UAAUuD,UAAY,SAAUjC,GACzC,IAAIuB,EAAU/C,KAAK+C,QACnB,OAAOA,EAAQvB,IAAUuB,EAAQa,OAE9BjB,GARP,SAASA,EAAad,EAAIkB,GACtB/C,KAAK6B,GAAKA,EACV7B,KAAK+C,QAAUA,ECvLvB,IACQ1D,EADJC,GACID,EAAgB,SAAUE,EAAGC,GAI7B,OAHAH,EAAgBI,OAAOC,gBAClB,CAAEC,UAAW,cAAgBC,OAAS,SAAUL,EAAGC,GAAKD,EAAEI,UAAYH,IACvE,SAAUD,EAAGC,GAAK,IAAK,IAAIK,KAAKL,EAAOA,EAAEM,eAAeD,KAAIN,EAAEM,GAAKL,EAAEK,MACpDN,EAAGC,IAErB,SAAUD,EAAGC,GAEhB,SAASO,IAAOC,KAAKC,YAAcV,EADnCF,EAAcE,EAAGC,GAEjBD,EAAEW,UAAkB,OAANV,EAAaC,OAAOU,OAAOX,IAAMO,EAAGG,UAAYV,EAAEU,UAAW,IAAIH,KAGnFmE,EAAsC,WAStC,OARAA,EAAWzE,OAAO0E,QAAU,SAASC,GACjC,IAAK,IAAIC,EAAGzB,EAAI,EAAG0B,EAAId,UAAUnC,OAAQuB,EAAI0B,EAAG1B,IAE5C,IAAK,IAAI/C,KADTwE,EAAIb,UAAUZ,GACOnD,OAAOS,UAAUJ,eAAemE,KAAKI,EAAGxE,KACzDuE,EAAEvE,GAAKwE,EAAExE,IAEjB,OAAOuE,IAEKb,MAAMvD,KAAMwD,YAM5Be,GAuCAA,EAAcC,gBAAkB,SAAUC,GACtC,IAAMA,IAAQA,EAAKC,OACf,MAAM,IAAI7D,MAAM,4EAGpB0D,EAAcI,eAAeF,EAAKC,OAAOE,eAAiBH,GAE9DF,EAAcrE,UAAU2E,gBAAkB,WACtC,MAAO,CAAEH,OAAQ1E,KAAK8E,UAE1BP,EAAcrE,UAAU6E,eAAiB,SAAUpD,GACxB,iBAAZA,IACPA,EAAU,CAACA,IAGfA,GAAWA,GAAW,IAAIqD,OAAOT,EAAcU,eAC/C,IACIrC,EAAGC,EAAKqC,EAAaT,EADrBU,EAAaZ,EAAcI,eAO/B,IAAK/B,EAAI,EAAGC,EAAMlB,EAAQN,OAAQuB,EAAIC,EAAKD,GAAK,EAE5C,IADAsC,EAAcvD,EAAQiB,GAAGgC,cAAcQ,MAAM,KACtCF,EAAY7D,QAAQ,CAEvB,GADAoD,EAAOU,EAAWD,EAAYG,KAAK,MAI/B,OAAOZ,EAAKC,OAEhBQ,EAAY/B,MAGpB,IAAI8B,EAAgBtD,EAAQwB,MAC5B,MAAM,IAAItC,MAAM,2DACZc,EAAQ0D,KAAK,MACb,4BACAJ,IAERV,EAAcrE,UAAUoF,gBAAkB,SAAUhF,EAAKqB,EAASO,GAE9D,OADe,IAAI9B,EAASuB,EAASO,GACrB7B,QAAQC,IAE5BiE,EAAcrE,UAAUqF,QAAU,SAAUxE,EAASyE,GACjD,IAAiB5C,EAAGC,EAAK4C,EAAM5D,EAAIL,EAA/BkE,EAAS,GACb,IAAK9C,EAAI,EAAGC,EAAM9B,EAAQM,OAAQuB,EAAIC,EAAKD,GAAK,EAG5C,GAAoB,iBAFpB6C,EAAO1E,EAAQ6B,IAEf,CAMA,GAFAf,EAAK4D,EAAK5D,KAEJ2D,GAAU3D,KAAM2D,GAClB,MAAM,IAAIG,EAAY,iCAAmC9D,EAAIA,GAEjEL,EAAQgE,EAAO3D,GAIY4D,ED+DxB1C,QC9DC2C,GAAU1F,KAAKuF,QAAQE,EAAKhC,UAAUjC,GAAQgE,GAG9CE,GAAUD,EAAK3D,OAAON,QAhBtBkE,GAAUD,EAmBlB,OAAOC,GAEXnB,EAAcU,cAAgB,KAC9BV,EAAcI,eAAiB,GAI/BJ,EAAcrC,QAAU,CACpBC,OAAQ,CACJyD,SAAU,CACNxD,MAAO,YAEXyD,QAAS,CACLzD,MAAO,YAGfE,KAAM,CACFwD,MAAO,CACHC,MAAO,UACPC,IAAK,UACLC,KAAM,WAEVC,OAAQ,CACJH,MAAO,QACPC,IAAK,UACLC,KAAM,WAEVE,KAAM,CACFJ,MAAO,OACPC,IAAK,UACLC,KAAM,WAEVG,KAAM,CACFC,QAAS,OACTN,MAAO,OACPC,IAAK,UACLC,KAAM,YAGd1D,KAAM,CACFuD,MAAO,CACHQ,KAAM,UACNC,OAAQ,WAEZL,OAAQ,CACJI,KAAM,UACNC,OAAQ,UACRC,OAAQ,WAEZL,KAAM,CACFG,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,aAAc,SAElBL,KAAM,CACFE,KAAM,UACNC,OAAQ,UACRC,OAAQ,UACRC,aAAc,WAI1BlC,EAAcmC,QAAUC,EAAOC,MACxBrC,GA5KP,SAASA,EAAcsC,EAASlF,EAASmF,GACrC,IAAInG,EAAQX,KAGZA,KAAK8B,OAAS,SAAU0D,GACpB,IACI,OAAO7E,EAAM4E,QAAQ5E,EAAMI,QAASyE,GAExC,MAAOuB,GACH,MAAIA,EAAEC,WACI,IAAInG,MAAM,qCACZkG,EAAEC,WACF,qCAEArG,EAAMkG,QACN,KAGEE,IAKlB,IAAIzG,EAAyB,iBAAZuG,EAAuBtC,EAAcmC,QAAQG,GAAWA,EACzE,IAAMvG,GAAoB,yBAAbA,EAAIM,KACb,MAAM,IAAIqG,UAAU,kDAIxB,IAAI/E,EA2JZ,SAAsBgF,EAAeC,GACjC,OAAKA,EAGEjD,EAAS,GAAIgD,EAAe,CAAE5E,KAbzC,SAAqB8E,EAAIC,GACrB,OAAKA,EAGEnD,EAAS,GAAKkD,GAAM,GAAMC,GAAM,GAAK5H,OAAO6H,KAAKF,GAAIG,OAAO,SAAUC,EAAKC,GAE9E,OADAD,EAAIC,GAAKvD,EAAS,GAAIkD,EAAGK,GAAKJ,EAAGI,IAAM,IAChCD,GACR,KALQJ,EAWgCM,CAAYR,EAAc5E,KAAM6E,EAAQ7E,QAFxE4E,EA7JOS,CAAapD,EAAcrC,QAAS4E,GAElD9G,KAAK8E,QAAU9E,KAAK+E,eAAepD,GAAW,IAI9C3B,KAAKe,QAAUf,KAAKsF,gBAAgBhF,EAAKqB,GAAW,GAAIO,GACxDlC,KAAK6G,QAAUA,EA0JvB,IAA2CxD,EAAvCsC,GAAuCtC,EAQzCxC,MAPEvB,EAAUqG,EAAatC,GAMhBsC,GALP,SAASA,EAAYiC,EAAKZ,GACtB,IAAIrG,EAAQ0C,EAAOY,KAAKjE,KAAM4H,IAAQ5H,KAEtC,OADAW,EAAMqG,WAAaA,EACZrG,WClOG6D,gBCFH,CAAEE,OAAU,SDGTO,cAAgB"}